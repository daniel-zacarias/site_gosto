<!DOCTYPE html>
<html lang="PT">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H-LOL</title>
    <link rel="stylesheet" href="css/estilo.css">
    <link rel="stylesheet" href="css/cadastro.css">
    <link rel="shortcut icon" href="css/imagens/logodaniel.png" type="image/x-icon">
    <script src="animacao.js"></script>
    <script src="funcoes.js"></script>
</head>

<body>
    <div class="Menu" >
        <a href="index.html"> <img src="css/imagens/wixLogo.PNG" alt="Icone" class="logo"> </a>
        <ul class="nav" >
            <a href="index.html">
                <li>Início</li>
            </a>
            <a href="regras.html">
                <li>Regras</li>
            </a>
            <a href="premio.html">
                <li>Prêmios</li>
            </a>
            
            <li><a href="login.html"><button class="btnlogin">Login</button></a></li>
            
            <li><a href="Cadastrar.html"><button class="btncadastro"> Cadastrar</button></a></li>
            

        </ul>
    </div>
    <div class="Cadastro">
        <div class="formCadastro">
        <form  id="FormularioC" method="POST" onsubmit="return cadastrar()" >

            <span>CADASTRO</span><br>
            <div class="campos">
                <label for="NomeLogin">Nome</label>

                <input type="text" id="NomeLogin" name="Nome" onfocus="focar(this)" onblur="disfocar(this)" class="NomeLogin" >
            </div>

            <div class="campos">
                <label for="Login">Nick</label>

                <input type="text" id="Login" onfocus="focar(this)" name="NickC" onblur="disfocar(this)" class="NomeLogin">
                
            </div>
            <div class="campos">
                <label for="Email">Email</label>
                <input type="email" onfocus="focar(this)" name="Email" onblur="disfocar(this)" id="Email" class="NomeLogin">
                
            </div>
            <div id="divData">
                <label style="color: white; font-size: 30px;" for="data">Data de nascimento</label>
                
            </div>
            <div class="divSelect" id="DivSelect">
            <label for="Lane" style="grid-column-end: 3; grid-column-start: 1">Principal Lane</label><br>
            <label for="time"style="grid-column-end: 7; grid-column-start: 5" >Campeão favorito</label><br>
            <select style="grid-column-end: 4; grid-column-start: 1; grid-row-start:2 ;" name="Rota" class="NomeLogin" id="Lane">
                <option value="1">TOPO</option>
                <option value="2">SELVA</option>
                <option value="3">MEIO</option>
                <option value="4">ATIRADOR</option>
                <option value="5">SUPORTE</option>
            </select><br>
            
            <select class="NomeLogin" onchange="" name="campeao" style="grid-column-end: 7; grid-column-start: 5; grid-row: 2/span 1;" id="slcCampeao">
             
            </select><br>
            </div>
            <div class="campos">
                <label for="senha">Senha</label>
                <input type="password" name="senhaC" id="senha" onfocus="focar(this)" onblur="disfocar(this)" class="senhaLogin"><br>
            </div>
            <div class="campos">
                <label for="confirm" class="confirmar">Confirmar senha</label>
                <input type="password" id="confirm"  onfocus="focar(this)" onblur="disfocar(this)" class="senhaLogin"><br>
            </div>            
            <input type="checkbox" name="" id="aceitar">
            <label for="aceitar" id="lblaceitar">Você leu as regras e concorda com elas?</label>
            <!-- <input class="btncadastrar" type="submit" onclick="validar()" value="Cadastrar"><br> -->
            <div id="divErros">
                <h1>Erro</h1>
                <ul id="listaErros">
    
                </ul>
            </div>
            <button type="submit" class="btncadastrar" onclick="validarCadastro()" >Cadastrar</button><br>
        </form>
        
        <span style="font-size: 20px;"> Já criou uma conta? <a href="login.html" style="color: white;">Clique
            aqui</a></span>
        </div>
        <div class="image">
        </div>
        <div id='idPop' class="sobreposicao">
        <div class="popUp">
            <span>Cadastro efetuado com Sucesso</span>
            <a class="fecharBTN" href="login.html">&times;</a>
            <p>Você irá ser redirecionado para a Página de Login</p>
        </div>
        </div>

        
    </div>
    
    <div class="rodape">
        <img src="css/imagens/wixLogo.PNG" alt="">
        <p style="color: white;">Feito por Daniel Soares 2020©</p>
    </div>
    <script src="animacao.js"></script>
</body>

</html>
<script >
    function cadastrar() {
        if(validarCadastro()){
        var formulario = new URLSearchParams(new FormData(FormularioC));
        fetch("/usuarios/cadastrar", {
            method: "POST",
            body: formulario
        }).then(function (response) {
            
            if (response.ok) {

                idPop.style.display = 'block';
    setInterval(() => {
        window.location.href='login.html'
    }, 2000);

            } else {

                console.log('Erro de cadastro!');
                response.text().then(function (resposta) {
                    console.log(resposta);
                });
            }
        });
    }
        return false;
    
}


//     const input = document.querySelectorAll("input");  //pega todos os elementos com a class .mudar(const valor contante)

// for (let i = 0; i < input.length; i++) {    //contador para todos os elementos
//    input[i].addEventListener("focus", function () { // quando o campo texto for usado
//        this.offsetParent.classList.add("ativar"); // adicione a div pai a class .ativar
//    }) 
//    input[i].addEventListener("blur", function () { //quando o campo de texto deixar de ser usado
//        if (this.value == "") // caso valor do texto for ""
//            this.offsetParent.classList.remove("ativar");  //retira a class .ativar
//    })

   
// }
// const campeao = ['Aatrox', 'Ahri','Akali', 'Alistar' , 'Amumu','Anivia','Annie','Aphelios', 'Ashe' ,'Aurelion Sol','Azir','Bardo',
//     'Blitz','Brand','Braum','Caitlyn', 'Camille', 'Cassiopeia', "Cho'Gath", 'Corki', 'Darius', 'Diana', 'Dr. Mundo','Draven', 'Ekko', 'Elise','Evelynn', 'Ezreal','Fiddlesticks' ,'Fiora', 'Fizz', 'Galio', 'GangPlank','Garen', 'Gnar','Gragas', 'Graves', 'Hecarim', 'Heimerdinger', 'Illaoi',
//     'Irelia', 'Ivern', 'Janna', 'Jarvan', 'Jax','jayce', 'Jhin', 'Jinx', "Kai'sa", 'Kalista', 'Karma', 'Karthus', 'Kassadin','Katarina', 'Kayle', 'Kayn', 'Kennen', "Kha'zix", 'Kindreds', 'Kled', "Kog'waw",'LeBlanc','Lee Sin','Leona','Lissandra', 'Lucian', 'Lulu', 'Lux', 'Malphite', 'Malzahar','Maokai', 'Master Yi', 'Miss Fortune', 'Mordekaiser', 'Morgana', 'Nami', 'Nasus', 'Nautilus','Neeko', 'NidaLee', 'Nocturne', 'Nunu e Willump', 'Olaf', 'Orianna', 'Ornn', 'Pantheon', 'Poppy', 'Pyke','Qiyana', 'Quinn','rakan', 'Rammus', "Rek'Sai", 'Renekton', 'Rengar','Riven','Rumble','Ryze','Sejuani','Senna','Sett','Shaco','Shen','Shyvana','Singed','Sion','Sivir','Skarner','Sona','Soraka','Swain','Sylas',
//     'Syndra','Tahm Kench','Taliyah','Talon','Taric','Teemo','Thresh','Tristana','Trundle','Tryndamere','Twisted Fate','Twitch','Udyr','Urgot','Varus','Vayne','Veigar',"Vel'Koz",'Vi','Viktor','Vladimir','Volibear','Warwick','Wukong',
//     'Xayah','Xerath','Xin Zhao','Yasuo','Yorick','Yuumi','Zac','Zed','Ziggs','Zillean', 'Zoe', 'Zyra'
//     ];
// for(let cont = 0;cont< campeao.length; cont++){
//     slcCampeao.innerHTML += `<option value="${cont+1}">${campeao[cont]}</option>` 
// }

    var dataAtual = new Date();
    divData.innerHTML += `<input type="date" name="DataNasc" class="NomeLogin" id="data" max="${dataAtual.getFullYear()}-${(dataAtual.getMonth()+1).length > 1 ? (dataAtual.getMonth()+1) : "0"+(dataAtual.getMonth()+1) }-${(dataAtual.getDate()).length > 1 ? dataAtual.getDate():  dataAtual.getDate()  }" value="2002-01-01">`;

</script>